(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{3620:(e,t,r)=>{"use strict";r.d(t,{k5:()=>c});var n=r(4232),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=n.createContext&&n.createContext(a),o=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var n,a,i;n=e,a=t,i=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){return t=>n.createElement(g,l({attr:d({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,d({key:r},t.attr),e(t.child)))}(e.child))}function g(e){var t=t=>{var r,{attr:a,size:i,title:s}=e,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,o),g=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:r,style:d(d({color:e.color||t.color},t.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),s&&n.createElement("title",null,s),e.children)};return void 0!==i?n.createElement(i.Consumer,null,e=>t(e)):t(a)}},5459:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r(7876),a=r(4232),i=r(7274),o=r(6184),l=r(3679),s=r(5072),d=r(9099);l.CMH,l.lhZ,l.gdQ,l.Tsk;let c=e=>{let{icon:t,label:r,value:a,subtext:i,cardStyle:o}=e;return(0,n.jsxs)("div",{style:{backgroundColor:"#030712",border:"1px solid #1A0938",borderRadius:"0.75rem",padding:"1.5rem",flex:"1 1 220px",minWidth:180,maxWidth:320,width:"100%",display:"flex",alignItems:"center",gap:"1rem",boxSizing:"border-box",...o},children:[(0,n.jsx)("div",{style:{color:"#8b5cf6"},children:t}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{color:"#d1d5db",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.25rem"},children:r}),(0,n.jsx)("div",{style:{color:"white",fontSize:"1.875rem",fontWeight:"bold"},children:a}),(0,n.jsx)("div",{style:{color:"#6b7280",fontSize:"12px",fontWeight:500,marginTop:"0.25rem"},children:i})]})]})};function g(){let{user:e}=(0,o.A)(),t=(0,d.useRouter)(),[r,g]=(0,a.useState)([]),[p,m]=(0,a.useState)(!0),[u,f]=(0,a.useState)(null),[h,x]=(0,a.useState)(""),b=async()=>{if(!(null==e?void 0:e.id))return void m(!1);m(!0),f(null);try{let{data:t,error:r}=await i.N.from("checkout_logs").select("id, nome, email, telefone, price, status, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;g(t||[])}catch(e){f("Erro ao carregar relat\xf3rio: ".concat(e.message||"Erro desconhecido"))}finally{m(!1)}};(0,a.useEffect)(()=>{e?b():t.replace("/login")},[e]);let y=(0,a.useMemo)(()=>{if(p||0===r.length)return{totalRevenue:0,approvedSales:0,pendingSales:0,totalSales:0};let e=r.filter(e=>"aprovado"===e.status),t=r.filter(e=>"pendente"===e.status);return{totalRevenue:r.reduce((e,t)=>e+(t.price||0),0),approvedSales:e.length,pendingSales:t.length,totalSales:r.length}},[r,p]),j=e=>null==e?"R$ 0,00":"R$ ".concat(Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2})),v=e=>{try{return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit"})}catch(e){return"Data inv\xe1lida"}},S=(0,a.useMemo)(()=>{if(!h.trim())return r;let e=h.trim().toLowerCase();return r.filter(t=>t.nome&&t.nome.toLowerCase().includes(e)||t.product_name&&t.product_name.toLowerCase().includes(e)||t.id&&t.id.toLowerCase().includes(e)||t.status&&t.status.toLowerCase().includes(e))},[r,h]);return e?(0,n.jsx)("div",{style:{width:"100%",boxSizing:"border-box",overflowX:"auto",paddingTop:"2rem",minHeight:"100vh",background:"#030712"},children:(0,n.jsx)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"0 2rem"},children:(0,n.jsxs)("main",{style:{flex:1,minWidth:0,padding:"2rem"},children:[(0,n.jsxs)("div",{style:{marginBottom:"0",marginTop:"0.5rem"},children:[(0,n.jsx)("h1",{style:{fontSize:32,fontWeight:900,color:"#fff",letterSpacing:"-1px",marginBottom:6},children:"Vendas"}),(0,n.jsx)("p",{style:{fontSize:18,color:"#fff",fontWeight:400},children:"Gerencie suas transa\xe7\xf5es"})]}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"1.5rem"},children:(0,n.jsxs)("button",{onClick:b,disabled:p,style:{display:"inline-flex",alignItems:"center",gap:10,background:"#030712",border:"2px solid #23243a",color:"#fff",fontWeight:700,fontSize:16,borderRadius:12,padding:"0.7rem 1.6rem",cursor:"pointer",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.10)",transition:"all 0.18s",opacity:p?.6:1},onMouseOver:e=>e.currentTarget.style.background="#030712",onMouseOut:e=>e.currentTarget.style.background="#030712",children:[(0,n.jsx)(l.KP4,{style:{color:"#a78bfa",fontSize:20,animation:p?"spin 1s linear infinite":void 0}}),"Atualizar dados"]})}),(0,n.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",gap:"1.5rem",width:"100%",justifyContent:"stretch",marginBottom:"2rem"},children:[(0,n.jsx)(c,{icon:(0,n.jsx)(l.A7C,{size:26}),label:"Vendas aprovadas",value:y.approvedSales,subtext:"Total de vendas aprovadas",cardStyle:{flex:1,minWidth:0,maxWidth:"none"}}),(0,n.jsx)(c,{icon:(0,n.jsx)(l.lhZ,{size:26}),label:"Vendas pendentes",value:y.pendingSales,subtext:"Aguardando confirma\xe7\xe3o",cardStyle:{flex:1,minWidth:0,maxWidth:"none"}}),(0,n.jsx)(c,{icon:(0,n.jsx)(l.gdQ,{size:26}),label:"Taxa de convers\xe3o",value:y.totalSales>0?(y.approvedSales/y.totalSales*100).toFixed(2)+"%":"0.00%",subtext:"Aprovadas + Total",cardStyle:{flex:1,minWidth:0,maxWidth:"none"}}),(0,n.jsx)(c,{icon:(0,n.jsx)(l.Tsk,{size:26}),label:"Valor total",value:"R$ ".concat(y.totalRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})),subtext:"Receita bruta",cardStyle:{flex:1,minWidth:0,maxWidth:"none"}})]}),(0,n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.1rem",alignItems:"center",background:"#030712",borderRadius:"1.2rem",padding:"1.5rem 2.5rem",marginBottom:"2rem",border:"1px solid #23243a",boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10)"},children:[(0,n.jsxs)("div",{style:{background:"#030712",border:"2px solid #23243a",borderRadius:"1rem",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.10)",padding:"0.2rem 1.2rem 0.2rem 0.5rem",display:"flex",alignItems:"center",minWidth:260,position:"relative"},children:[(0,n.jsx)(l.KSO,{style:{position:"absolute",left:20,top:"50%",transform:"translateY(-50%)",color:"#a78bfa",fontSize:22,pointerEvents:"none"}}),(0,n.jsx)("input",{type:"text",placeholder:"Pesquisar por",value:h,onChange:e=>x(e.target.value),style:{minWidth:180,background:"transparent",color:"#fff",border:"none",outline:"none",height:48,fontSize:17,borderRadius:10,padding:"0 0 0 2.5rem",fontWeight:500,flex:1,transition:"border 0.18s"},onFocus:e=>{e.target.parentElement&&(e.target.parentElement.style.border="2px solid #a78bfa")},onBlur:e=>{e.target.parentElement&&(e.target.parentElement.style.border="2px solid #23243a")}})]}),[{label:"Status",minWidth:130},{label:"Data",minWidth:110},{label:"M\xe9todo de Pagamento",minWidth:190},{label:"Produto",minWidth:120},{label:"UTM",minWidth:100}].map((e,t)=>(0,n.jsxs)("button",{className:"filter-btn",style:{background:"#030712",border:"2px solid #23243a",borderRadius:"1rem",color:"#a1a1aa",minWidth:e.minWidth,height:48,display:"flex",alignItems:"center",gap:8,fontWeight:700,fontSize:17,padding:"0 1.5rem",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.10)",transition:"border 0.2s, color 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseOver:e=>{e.currentTarget.style.border="2px solid #a78bfa",e.currentTarget.style.color="#a78bfa",e.currentTarget.style.boxShadow="0 4px 16px 0 rgba(0,0,0,0.16)"},onMouseOut:e=>{e.currentTarget.style.border="2px solid #23243a",e.currentTarget.style.color="#a1a1aa",e.currentTarget.style.boxShadow="0 2px 8px 0 rgba(0,0,0,0.10)"},children:[e.label," ",(0,n.jsx)(l.Vr3,{style:{marginLeft:6,fontSize:18}})]},e.label))]}),(0,n.jsxs)("div",{style:{background:"#030712",border:"2px solid #23243a",borderRadius:"1.2rem",boxShadow:"0 2px 12px 0 rgba(0,0,0,0.10)",padding:"2rem 2.5rem",marginTop:"2rem",marginBottom:"2rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,n.jsx)("h2",{style:{fontSize:26,fontWeight:800,color:"#fff",letterSpacing:"-0.5px"},children:"Transa\xe7\xf5es"}),(0,n.jsxs)("span",{style:{fontSize:16,color:"#a1a1aa",fontWeight:500},children:[r.length," transa\xe7\xf5es encontradas"]})]}),(0,n.jsx)("div",{style:{overflowX:"auto",borderRadius:"1rem"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,background:"transparent"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{background:"#0B101D"},children:[(0,n.jsxs)("th",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:700,fontSize:15,textAlign:"left",borderTopLeftRadius:"1rem",letterSpacing:"-0.5px"},children:[(0,n.jsx)(l.bfZ,{style:{marginRight:6,marginBottom:-2}})," Data"]}),(0,n.jsx)("th",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:700,fontSize:15,textAlign:"left",letterSpacing:"-0.5px"},children:"ID"}),(0,n.jsxs)("th",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:700,fontSize:15,textAlign:"left",letterSpacing:"-0.5px"},children:[(0,n.jsx)(l.Tsk,{style:{marginRight:6,marginBottom:-2}})," L\xedquido"]}),(0,n.jsxs)("th",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:700,fontSize:15,textAlign:"left",letterSpacing:"-0.5px"},children:[(0,n.jsx)(l.rrY,{style:{marginRight:6,marginBottom:-2}})," Produto"]}),(0,n.jsxs)("th",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:700,fontSize:15,textAlign:"left",letterSpacing:"-0.5px"},children:[(0,n.jsx)(l.x$1,{style:{marginRight:6,marginBottom:-2}})," Cliente"]}),(0,n.jsxs)("th",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:700,fontSize:15,textAlign:"left",letterSpacing:"-0.5px"},children:[(0,n.jsx)(l.x1c,{style:{marginRight:6,marginBottom:-2}})," Pagamento"]}),(0,n.jsx)("th",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:700,fontSize:15,textAlign:"left",borderTopRightRadius:"1rem",letterSpacing:"-0.5px"},children:"Status"})]})}),(0,n.jsxs)("tbody",{children:[0===S.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,style:{textAlign:"center",color:"#a1a1aa",padding:"2rem",fontSize:16},children:"Nenhuma venda encontrada."})}),S.map((e,t)=>(0,n.jsxs)("tr",{style:{background:t%2==0?"rgba(255,255,255,0.01)":"rgba(255,255,255,0.03)",transition:"background 0.2s"},children:[(0,n.jsx)("td",{style:{padding:"1rem",color:"#fff",fontWeight:600,whiteSpace:"nowrap"},children:v(e.created_at)}),(0,n.jsx)("td",{style:{padding:"1rem"},children:(0,n.jsx)("span",{style:{background:"#1C2533",color:"#F9FAFB",borderRadius:8,padding:"0.3rem 0.7rem",fontSize:13,fontWeight:700,fontFamily:"monospace",display:"inline-block",letterSpacing:"0.5px"},children:e.id})}),(0,n.jsx)("td",{style:{padding:"1rem",color:"#fff",fontWeight:800,fontSize:16},children:j(e.price)}),(0,n.jsx)("td",{style:{padding:"1rem",color:"#c4b5fd",fontWeight:500},children:e.product_name||"-"}),(0,n.jsx)("td",{style:{padding:"1rem",color:"#a1a1aa",fontWeight:500,maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.nome||"-"}),(0,n.jsx)("td",{style:{padding:"1rem"},children:(0,n.jsx)("span",{style:{background:"#030712",borderRadius:"50%",width:36,height:36,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(s.W5X,{style:{color:"#00B686",fontSize:20}})})}),(0,n.jsx)("td",{style:{padding:"1rem"},children:"aprovado"===e.status?(0,n.jsxs)("span",{style:{background:"#052e16",color:"#22c55e",borderRadius:16,padding:"0.3rem 1.1rem",fontWeight:700,fontSize:14,display:"inline-block"},children:[(0,n.jsx)(l.A7C,{style:{marginRight:6,marginBottom:-2}}),"Aprovado"]}):"pendente"===e.status?(0,n.jsxs)("span",{style:{background:"#3d2c13",color:"#fbbf24",borderRadius:16,padding:"0.3rem 1.1rem",fontWeight:700,fontSize:14,display:"inline-block"},children:[(0,n.jsx)(l.lhZ,{style:{marginRight:6,marginBottom:-2}}),"Pendente"]}):(0,n.jsx)("span",{style:{background:"#23243a",color:"#a1a1aa",borderRadius:16,padding:"0.3rem 1.1rem",fontWeight:700,fontSize:14,display:"inline-block"},children:e.status||"-"})})]},e.id))]})]})})]})]})})}):(0,n.jsx)("div",{children:"Carregando..."})}},7e3:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/relatorio",function(){return r(5459)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[938,710,636,593,792],()=>t(7e3)),_N_E=e.O()}]);