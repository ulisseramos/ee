(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{1172:(e,r,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/produtos",function(){return o(6567)}])},6567:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>w});var t=o(7876),i=o(4232),n=o(8992),a=o(4613),d=o(672),s=o(6503),l=o(7274),c=o(6184);let u=["Cursos","E-Books","Produtos F\xedsicos","Consultoria","Outro"];function g(e){var r,o,g;let{onProductCreated:p=()=>{},onCancel:x=()=>{}}=e,{register:h,handleSubmit:m,formState:{errors:f,isSubmitting:b}}=(0,n.mN)(),[y,j]=(0,i.useState)(null),v=(0,i.useRef)(null),{user:k}=(0,c.A)(),[S,w]=(0,i.useState)("");async function C(e){if(w(""),!k)return void w("Usu\xe1rio n\xe3o autenticado.");let{category:r,...o}=e,t={...o,user_id:k.id},{error:i}=await l.N.from("products").insert([t]);if(i)return void w("Erro ao criar produto: "+i.message);p()}return(0,t.jsx)("div",{style:{position:"fixed",top:0,left:"300px",width:"calc(100vw - 300px)",height:"100vh",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(3,7,18,0.98)"},children:(0,t.jsxs)("div",{style:{width:"100%",maxWidth:2e3,margin:"0 auto",padding:"48px 32px",overflow:"visible",background:"#030712",borderRadius:8,boxShadow:"0 80px 40px rgba(0,0,0,0.25)",position:"relative"},children:[(0,t.jsxs)("button",{type:"button",onClick:x,style:{position:"absolute",top:24,left:24,background:"none",border:"none",color:"#A78BFA",fontWeight:700,fontSize:16,cursor:"pointer",zIndex:10001,display:"flex",alignItems:"center",gap:6},children:[(0,t.jsx)("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:(0,t.jsx)("polyline",{points:"15 18 9 12 15 6"})}),"Voltar"]}),(0,t.jsx)("h1",{style:{fontSize:28,fontWeight:700,color:"white",marginBottom:32,textAlign:"center",borderBottom:"2px solid #1B0C37",paddingBottom:16,position:"relative"},children:"Criar Novo Produto"}),(0,t.jsxs)("form",{onSubmit:m(C),className:"mt-8",style:{width:"100%"},children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:64,marginBottom:40,alignItems:"flex-start",justifyContent:"center",width:"100%",maxWidth:900,marginLeft:"auto",marginRight:"auto"},children:[(0,t.jsxs)("div",{style:{borderRadius:20,border:"1.5px solid #1B0C37",background:"#1B0C37",overflow:"hidden",transition:"all 0.3s",minWidth:300,maxWidth:430,width:"100%",padding:20},children:[(0,t.jsx)("div",{style:{padding:0,borderBottom:"3px #1B0C37",marginBottom:32},children:(0,t.jsx)("h3",{style:{fontSize:18,fontWeight:700,color:"#A78BFA",margin:0,padding:0},children:"Imagem do Produto"})}),(0,t.jsx)("div",{style:{padding:24,paddingTop:0},children:(0,t.jsxs)("div",{onClick:()=>v.current.click(),onDrop:function(e){e.preventDefault();let r=e.dataTransfer.files[0];r&&r.size<=0xf00000&&j(URL.createObjectURL(r))},onDragOver:e=>e.preventDefault(),style:{border:"1.5px solid #1B0C37",borderRadius:12,background:"#030712",minHeight:210,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,cursor:"pointer",marginBottom:10,padding:24,textAlign:"center",width:"100%",boxSizing:"border-box",transition:"border 0.2s"},tabIndex:0,children:[y?(0,t.jsx)("img",{src:y,alt:"Preview",style:{maxWidth:120,maxHeight:120,borderRadius:10,marginBottom:8}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(126,34,206,0.1)",borderRadius:"50%",padding:12,marginBottom:8},children:(0,t.jsx)(a.A,{size:28,style:{color:"#1B0C37"}})}),(0,t.jsx)("div",{style:{color:"white",fontWeight:500,fontSize:15},children:"Arraste e solte um arquivo aqui"}),(0,t.jsx)("div",{style:{color:"#a1a1aa",fontSize:13},children:"ou clique para selecionar"}),(0,t.jsx)("div",{style:{color:"#a1a1aa",fontSize:12,marginTop:8},children:"M\xe1ximo 15.00MB"}),(0,t.jsx)("div",{style:{color:"#a1a1aa",fontSize:12},children:"Tamanho recomendado: 1920px \xd7 1080px (propor\xe7\xe3o 16:9)"})]}),(0,t.jsx)("input",{type:"file",accept:"image/*",ref:v,style:{display:"none"},onChange:function(e){let r=e.target.files[0];r&&r.size<=0xf00000&&j(URL.createObjectURL(r))}})]})})]}),(0,t.jsxs)("div",{style:{borderRadius:16,border:"1.5px solid #1B0C37",background:"#030712",overflow:"hidden",transition:"all 0.3s",minWidth:300,maxWidth:430,width:"100%",padding:20},children:[(0,t.jsx)("div",{style:{padding:0,borderBottom:"1px solid #7E22CE22",marginBottom:10},children:(0,t.jsx)("h3",{style:{fontSize:18,fontWeight:700,color:"#A78BFA",margin:0,padding:0},children:"Detalhes do Produto"})}),(0,t.jsxs)("div",{style:{padding:24,paddingTop:0,display:"flex",flexDirection:"column",gap:24},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{color:"#A78BFA",fontWeight:600,fontSize:15},children:"Nome do Produto"}),(0,t.jsx)("input",{type:"text",...h("name",{required:"Nome \xe9 obrigat\xf3rio"}),style:{width:"100%",background:"transparent",border:"1.5px solid #7E22CE33",borderRadius:8,color:"white",padding:"8px 10px",fontSize:14,outline:"none",marginTop:4},placeholder:"Ex: Ebook de Receitas"}),"string"==typeof(null==(r=f.name)?void 0:r.message)&&(0,t.jsx)("p",{style:{color:"#F87171",fontSize:13,marginTop:4},children:f.name.message})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{color:"#A78BFA",fontWeight:600,fontSize:15},children:"Categoria"}),(0,t.jsxs)("select",{...h("category",{required:"Selecione uma categoria"}),style:{width:"100%",background:"transparent",border:"1.5px solid #7E22CE33",borderRadius:8,color:"white",padding:"8px 10px",fontSize:14,outline:"none",marginTop:4},defaultValue:"",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Selecione a categoria"}),u.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),"string"==typeof(null==(o=f.category)?void 0:o.message)&&(0,t.jsx)("p",{style:{color:"#F87171",fontSize:13,marginTop:4},children:f.category.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{color:"#A78BFA",fontWeight:600,fontSize:15},children:"Pre\xe7o"}),(0,t.jsx)("input",{type:"number",step:"0.01",...h("price",{required:"Pre\xe7o \xe9 obrigat\xf3rio",valueAsNumber:!0,min:{value:.01,message:"O pre\xe7o deve ser positivo"}}),style:{width:"100%",background:"transparent",border:"1.5px solid #7E22CE33",borderRadius:8,color:"white",padding:"8px 10px",fontSize:14,outline:"none",marginTop:4},placeholder:"29.90"}),"string"==typeof(null==(g=f.price)?void 0:g.message)&&(0,t.jsx)("p",{style:{color:"#F87171",fontSize:13,marginTop:4},children:f.price.message})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{color:"#A78BFA",fontWeight:600,fontSize:15},children:"Descri\xe7\xe3o do Produto"}),(0,t.jsx)("textarea",{...h("description"),rows:4,style:{width:"100%",background:"transparent",border:"1.5px solid #7E22CE33",borderRadius:8,color:"white",padding:"8px 10px",fontSize:14,outline:"none",marginTop:4,resize:"none"},placeholder:"Descreva seu produto...",maxLength:500})]})]})]})]}),S&&(0,t.jsx)("div",{style:{color:"#F87171",background:"#1B0C37",border:"1px solid #7E22CE",borderRadius:8,padding:12,marginBottom:16,textAlign:"center"},children:S}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:24,paddingTop:24},children:[(0,t.jsxs)("button",{type:"button",onClick:x,style:{display:"flex",alignItems:"center",gap:8,color:"#A78BFA",fontWeight:700,padding:"0.75rem 1.5rem",borderRadius:10,background:"none",border:"2px solid #A78BFA",cursor:"pointer",transition:"all 0.2s ease",fontSize:15},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.02)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:[(0,t.jsx)(d.A,{size:22}),"Cancelar"]}),(0,t.jsx)("button",{type:"submit",disabled:b,style:{display:"flex",alignItems:"center",gap:8,backgroundColor:"#1B0C37",color:"white",fontWeight:"bold",padding:"0.75rem 1.5rem",borderRadius:10,border:"none",cursor:"pointer",opacity:b?.5:1,fontSize:16,transition:"all 0.2s ease",boxShadow:"0 2px 10px rgba(126, 34, 206, 0.3)"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.02)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Criando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.A,{size:20}),"Criar Produto"]})})]})]})]})})}var p=o(9340),x=o(3569),h=o(3609),m=o(3022),f=o(2089),b=o(7446),y=o(5104),j=o(7685);let v=(e,r)=>{navigator.clipboard.writeText(e),r(!0),j.oR.success("Link copiado!"),setTimeout(()=>r(!1),1e3)},k=e=>{let{product:r,onDeleteProduct:o}=e,[n,a]=(0,i.useState)(!1),[d,s]=(0,i.useState)(!1);return(0,t.jsxs)("tr",{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),style:{background:n?"#18181b":"transparent",transition:"background 0.15s",borderRadius:10},children:[(0,t.jsx)("td",{style:{padding:"0.9rem 0.7rem",color:"#fff",fontWeight:600,fontSize:16},children:r.name}),(0,t.jsx)("td",{style:{padding:"0.9rem 0.7rem"},children:(0,t.jsxs)("button",{onClick:()=>v(r.checkout_url||"".concat(window.location.origin,"/checkout/").concat(r.id),s),title:"Copiar link do checkout",style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:"#18122B",border:"1.5px solid #1A0938",borderRadius:8,padding:"0.4rem 0.9rem",fontSize:"0.97rem",color:d?"#a78bfa":"#a1a1aa",cursor:"pointer",fontWeight:500,minWidth:120,maxWidth:180,overflow:"hidden",transition:"color 0.15s, border 0.15s, background 0.18s",borderColor:d?"#a78bfa":"#1A0938",outline:d?"2px solid #a78bfa":"none",boxShadow:d?"0 0 0 2px #a78bfa33":"none"},children:[(0,t.jsx)("span",{style:{maxWidth:110,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.checkout_url||"".concat(window.location.origin,"/checkout/").concat(r.id)}),(0,t.jsx)(p.A,{size:18})]})}),(0,t.jsx)("td",{style:{padding:"0.9rem 0.7rem",color:"#a1a1aa",fontWeight:400,fontSize:15},children:new Date(r.created_at).toLocaleDateString("pt-BR")}),(0,t.jsx)("td",{style:{padding:"0.9rem 0.7rem",textAlign:"center"},children:r.active?(0,t.jsx)(x.A,{size:18,style:{color:"#22C55E"}}):(0,t.jsx)(h.A,{size:18,style:{color:"#fbbf24"}})}),(0,t.jsx)("td",{style:{padding:"0.9rem 0.7rem",textAlign:"center"},children:(0,t.jsx)("button",{style:{background:"#18122B",border:"1.5px solid #1A0938",color:"#a1a1aa",borderRadius:"8px",padding:"0.4rem 0.7rem",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s",fontSize:0,display:"inline-flex",alignItems:"center",justifyContent:"center"},title:"Editar produto",onMouseOver:e=>{e.currentTarget.style.background="#23233a",e.currentTarget.style.color="#a78bfa",e.currentTarget.style.borderColor="#a78bfa"},onMouseOut:e=>{e.currentTarget.style.background="#18122B",e.currentTarget.style.color="#a1a1aa",e.currentTarget.style.borderColor="#1A0938"},children:(0,t.jsx)(m.A,{size:20})})}),(0,t.jsx)("td",{style:{padding:"0.9rem 0.7rem",textAlign:"center"},children:(0,t.jsx)("button",{onClick:()=>o(r.id),style:{background:"#18122B",border:"1.5px solid #1A0938",color:"#ef4444",borderRadius:"8px",padding:"0.4rem 0.7rem",cursor:"pointer",transition:"background 0.18s, color 0.18s, border 0.18s",fontSize:0,display:"inline-flex",alignItems:"center",justifyContent:"center"},title:"Excluir produto",onMouseOver:e=>{e.currentTarget.style.background="#2a0a1a",e.currentTarget.style.color="#ff4d4f",e.currentTarget.style.borderColor="#ff4d4f"},onMouseOut:e=>{e.currentTarget.style.background="#18122B",e.currentTarget.style.color="#ef4444",e.currentTarget.style.borderColor="#1A0938"},children:(0,t.jsx)(f.A,{size:20})})})]})};function S(e){let{products:r,loading:o,onDeleteProduct:n}=e,[a,d]=(0,i.useState)("");if(o)return(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"10rem",color:"#9CA3AF",fontSize:16},children:[(0,t.jsx)(b.A,{className:"animate-spin",style:{marginRight:"0.5rem"}}),"Carregando produtos..."]});let s=r.filter(e=>e.name.toLowerCase().includes(a.toLowerCase()));return(0,t.jsxs)("div",{style:{background:"#030712",borderRadius:18,padding:"2.2rem 2rem",border:"1.5px solid #1A0938",maxWidth:1300,margin:"0 auto",boxShadow:"0 8px 32px 0 rgba(30,41,59,0.13)",backdropFilter:"blur(4px)"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:28,gap:16,background:"linear-gradient(90deg, #18122B 60%, #1e293b 100%)",borderRadius:12,boxShadow:"0 2px 16px 0 #a78bfa22, 0 0 0 2px #a78bfa33",border:"1.5px solid #a78bfa",padding:"1.1rem 1.5rem",position:"relative"},children:[(0,t.jsx)("input",{type:"text",value:a,onChange:e=>d(e.target.value),placeholder:"Buscar produto...",style:{background:"rgba(24,18,43,0.95)",border:"1.5px solid #a78bfa",borderRadius:8,color:"#fff",padding:"0.8rem 1.2rem",fontSize:16,outline:"none",minWidth:260,transition:"border 0.18s, box-shadow 0.18s",boxShadow:"0 1px 8px #a78bfa22",fontWeight:500,letterSpacing:.2}}),(0,t.jsxs)("button",{style:{background:"linear-gradient(90deg, #2563eb 0%, #a78bfa 100%)",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.5rem",fontWeight:700,fontSize:16,cursor:"pointer",boxShadow:"0 2px 12px #2563eb33",display:"flex",alignItems:"center",gap:10,transition:"background 0.18s",textShadow:"0 1px 8px #2563eb44"},children:[(0,t.jsx)(y.A,{size:20})," Novo Produto"]})]}),(0,t.jsx)("div",{style:{overflowX:"auto",borderRadius:10},children:(0,t.jsxs)("table",{style:{width:"100%",textAlign:"left",borderCollapse:"separate",borderSpacing:0,minWidth:600},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"2px solid rgba(255,255,255,0.08)"},children:[(0,t.jsx)("th",{style:{padding:"0.9rem 0.7rem",color:"#a1a1aa",fontWeight:700,fontSize:15,background:"none"},children:"Nome"}),(0,t.jsx)("th",{style:{padding:"0.9rem 0.7rem",color:"#a1a1aa",fontWeight:700,fontSize:15,background:"none"},children:"Link"}),(0,t.jsx)("th",{style:{padding:"0.9rem 0.7rem",color:"#a1a1aa",fontWeight:700,fontSize:15,background:"none"},children:"Criado em"}),(0,t.jsx)("th",{style:{padding:"0.9rem 0.7rem",color:"#a1a1aa",fontWeight:700,fontSize:15,background:"none",textAlign:"center"},children:"Status"}),(0,t.jsx)("th",{style:{padding:"0.9rem 0.7rem",color:"#a1a1aa",fontWeight:700,fontSize:15,background:"none",textAlign:"center"},children:"Editar"}),(0,t.jsx)("th",{style:{padding:"0.9rem 0.7rem",color:"#a1a1aa",fontWeight:700,fontSize:15,background:"none",textAlign:"center"},children:"Excluir"})]})}),(0,t.jsx)("tbody",{children:0===s.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,style:{textAlign:"center",color:"#a1a1aa",padding:"2rem",fontSize:15},children:"Nenhum produto encontrado."})}):s.map(e=>(0,t.jsx)(k,{product:e,onDeleteProduct:n},e.id))})]})})]})}function w(){let{products:e,loading:r,fetchProducts:o,deleteProduct:n}=function(){let{user:e}=(0,c.A)(),[r,o]=(0,i.useState)([]),[t,n]=(0,i.useState)(!0),a=(0,i.useCallback)(async()=>{if(!(null==e?void 0:e.id)){o([]),n(!1);return}n(!0);let{data:r,error:t}=await l.N.from("products").select("*").eq("user_id",e.id);t?(console.error("Erro ao buscar produtos:",t),o([])):o(r),n(!1)},[null==e?void 0:e.id]),d=(0,i.useCallback)(async r=>{if(!(null==e?void 0:e.id))return void console.error("Usu\xe1rio n\xe3o autenticado para deletar o produto.");let{error:t}=await l.N.from("products").delete().eq("id",r).eq("user_id",e.id);t?console.error("Erro ao deletar produto:",t):o(e=>e.filter(e=>e.id!==r))},[null==e?void 0:e.id]);return(0,i.useEffect)(()=>{(null==e?void 0:e.id)?a():(n(!1),o([]))},[null==e?void 0:e.id,a]),{products:r,loading:t,fetchProducts:a,addProduct:(0,i.useCallback)(e=>{o(r=>[e,...r])},[]),deleteProduct:d,updateProduct:(0,i.useCallback)(e=>{o(r=>r.map(r=>r.id===e.id?e:r))},[])}}(),[a,d]=(0,i.useState)(!1);return(0,t.jsx)("div",{style:{width:"100%",boxSizing:"border-box",overflowX:"auto",paddingTop:"2rem",minHeight:"100vh",background:"#030712"},children:(0,t.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"0 2rem"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:24},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:{fontSize:32,fontWeight:900,color:"#fff",letterSpacing:"-1px",marginBottom:2},children:"Produtos"}),(0,t.jsx)("p",{style:{fontSize:16,color:"#a1a1aa",fontWeight:400,marginBottom:0},children:"Visualize e gerencie todos seus produtos."})]}),(0,t.jsxs)("button",{onClick:()=>d(!0),style:{background:"linear-gradient(90deg, #2563eb 0%, #a78bfa 100%)",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.5rem",fontWeight:700,fontSize:16,cursor:"pointer",display:"flex",alignItems:"center",gap:8,boxShadow:"0 2px 16px 0 #a78bfa22"},children:[(0,t.jsx)(y.A,{size:18})," Criar produto"]})]}),a&&(0,t.jsx)("div",{style:{maxWidth:800,margin:"40px auto",background:"#18122B",borderRadius:16,boxShadow:"0 2px 16px rgba(0,0,0,0.12)",display:"flex",flexDirection:"column"},children:(0,t.jsx)(g,{onProductCreated:()=>{d(!1),o()},onCancel:()=>d(!1)})}),!a&&(0,t.jsx)("main",{style:{flex:1,minWidth:0,padding:"2rem"},children:(0,t.jsx)(S,{products:e,loading:r,onDeleteProduct:n})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[62,636,593,792],()=>r(1172)),_N_E=e.O()}]);